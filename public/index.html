<!doctype html>
<html>
<head>
	<title>Quick Links</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="stylesheets/model.css">
	<link rel="stylesheet" type="text/css" href="stylesheets/style.css">

	<!-- jQuery library -->
	<script src="vendor/jquery.js"></script>

	<!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script src="vendor/angular.js"></script>
	<script src="vendor/angular-route.js"></script>
	<script src="vendor/angular-resource.js"></script>
	<script src="vendor/angular-animate.js"></script>
	<script src="vendor/underscore.js"></script>
	<script src="vendor/bootbox.js"></script>


	<script src="javascripts/app.js"></script>
	<script src="javascripts/modals.js"></script>
	<script src="javascripts/directives.js"></script>
	<script src="javascripts/filters.js"></script>
	<script src="javascripts/iterators.js"></script>
  <script src="javascripts/pager.js"></script>
  <script src="javascripts/tabitemscontext.js"></script>

	<script src="javascripts/milestones.js"></script>
	<script src="javascripts/resources.js"></script>
</head>

<body ng-app="app" ng-controller="HomeCtrl">

<div class="container-fluid"> <!-- container-fluid -->

	<div class="row voffset1" ng-repeat="h in refSectionsHorizontals">

		<div ng-if="$index===0" class="col-lg-11">
			<section sdata="h"></section>
		</div>

		<div ng-if="$index===0" class="col-lg-1" style="padding-right: 0">
			<button class="btn btn-sm btn-warning pull-right"
					ng-click='setup()'
					type="button">Setup</button>
		</div>

		<div ng-if="$index!==0" class="col-lg-12">
			<section sdata="h"></section>
		</div>
	</div>
	<br/>


	<div class="row voffset1" ng-repeat="vrow in vrows">
		<div ng-repeat="v in vrow" class="col-lg-3">
				<sectionv sdata="v" edit="edit"></sectionv>
		</div>
	</div>

<div twmodals ng-show="subview" class="tw-m-modals" ng-switch="subview">
	<div style="width:1100px; margin-left:-550px;" ng-switch-when="setup" ng-controller="SetupModalController" class="tw-modal container">
		<div class="col-md-12">

			<div class="row">
				<div class="col-md-2 col-md-offset-5">
					<h4>Reference Edit <span ng-if="dirtyDataIndicator">(*)</span></h4>
				</div>
			</div>

			<div class="row" ng-show="serverError">
				<div class="alert alert-danger alert-dismissible col-md-8 col-md-offset-2"
					 role="alert">
					 <button type="button" class="close" data-dismiss="alert">&times;</button>
					 <strong>ERROR: </strong>{{serverError}}
				</div>
			</div>

			<div class="row">
				<div class="col-md-10 col-md-offset-1" >
					<form class="row form-inline form-group-md">

						<div class="btn-group col-md-2">
							<button type="button" class="btn btn-primary">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{mode}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
							<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
								<span class="caret"></span>
							</button>
							<ul class="dropdown-menu">
								<li><a href="#" ng-click="modeChanged('Add')" >Add</a></li>
								<li><a href="#" ng-click="modeChanged('Edit')" >Edit</a></li>
							</ul>
						</div>

						<div class="form-group col-md-4">
							<input ng-model="currentRefSection.title"
										 ng-disabled="!currentRefSection"
											type="text" class="form-control" id="refTitle" placeholder="Enter Title" style="width:100%"
									ng-change="titleChanged()">
						</div>

						<div class="form-group col-md-4">
							<label for="selectTitles">Select:</label>
							<select class="form-control" id="selectTitles" placeholder="Select Title" style="width:75%"
									ng-model="selectedRefSection"
									ng-options="rsec.title for rsec in refSections"
									ng-change="currentRefSectionChanged()"
									ng-disabled="mode !== 'Edit' || dirtyDataIndicator">
							</select>

						</div>

						<div class="form-group col-md-2">
							<label for="refKey">Key:</label>
							<input ng-model="currentRefSection.key"
							       ng-disabled="!currentRefSection"
										 type="text" class="form-control" id="refKey" style="width:71%">
						</div>

					</form>
				</div>
			</div>

			<div class="row voffset2">
				<div class="col-md-10 col-md-offset-1">
					<form class="row form-inline form-group-md">
						<div class="form-group col-md-8">
							<input  ng-model="currentRefSection.comment" ng-disabled="!currentRefSection"
									type="text" class="form-control" id="refComment" placeholder="Add comment" style="width:100%">
						</div>

						<div class="btn-group col-md-2">
							<button type="button" ng-model="currentRefSection.sectionType" ng-disabled="!currentRefSection"
										  class="btn btn-primary">{{currentRefSection.sectionType ? currentRefSection.sectionType : "Vert"}}</button>
							<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
											ng-disabled="!currentRefSection">
											<span class="caret"></span>
							</button>
							<ul class="dropdown-menu">
								<li><a href="#" ng-click="sectionTypeChanged('Vert')" >Vert</a></li>
								<li><a href="#" ng-click="sectionTypeChanged('Horz')" >Horz</a></li>
							</ul>
						</div>

						<div class="form-group col-md-2">
							<label for="refSectionOrder">Ord:</label>
							<input ng-model="currentRefSection.sectionOrder"
										 ng-disabled="!currentRefSection"
										 type="number"
										 class="form-control" id="refSectionOrder"
										 style="width:71%" ng-change="sectionOrderChanged()">
						</div>
					</form>
				</div>
			</div>

			<div class="row voffset1">
				<div class="col-md-10 col-md-offset-1">
					<ul class="nav nav-tabs" ng-disabled="!currentRefSection" >
						<li class="active"><a data-toggle="tab" href="#jumpList">Jump List</a></li>
						<li><a data-toggle="tab" href="#linkList">Ref List</a></li>
						<li><a data-toggle="tab" href="#milestones">Milestones</a></li>
					</ul>

					<div class="tab-content well" style="padding-bottom: 1px;">
						<div id="jumpList" class="tab-pane fade in active">
							<div class="row voffset2">
								<div class="form-group col-md-6">
									<input ng-model="tabJumpItemsCtx.selectedItem.title"
										   type="text" class="form-control"
										   placeholder="Enter title for item" style="width:100%">
								</div>

								<div class="form-group col-md-4">
									<input ng-model="tabJumpItemsCtx.selectedItem.link"
										   type="text" class="form-control" placeholder="Enter url" style="width:100%">
								</div>

								<div class="form-group col-md-2">
									<input ng-model="tabJumpItemsCtx.selectedItem.order"
						 							type="number" class="form-control" style="width:100%">
								</div>

							</div>

							<div class="row">
								<div class="form-group col-md-12">
									<label for="comment">Note:</label>
									<textarea ng-model="tabJumpItemsCtx.selectedItem.note"
											  class="form-control" rows="2" id="comment"></textarea>
								</div>
							</div>

							<div class="row">
								<div class="col-md-3 col-md-offset-9">
									<button type="button" class="btn btn-warning btn-sm"
											ng-click="tabJumpItemsCtx.itemCancel()" >Clear</button>
									<button type="button" class="btn btn-danger btn-sm"
											ng-click="tabJumpItemsCtx.itemDelete(currentRefSection.jumpItems)" >Delete</button>
									<button type="button" class="btn btn-primary btn-sm"
											ng-click="tabJumpItemsCtx.itemAddOrSave(currentRefSection.jumpItems)" >{{tabJumpItemsCtx.verb}}</button>
								</div>
							</div>

							<div class="row">
								<table class="table table-condensed table-hover voffset3" style="margin-bottom: 0;">
									<thead>
									<tr>
										<th class="col-md-3">Title</th>
										<th class="col-md-5">Note</th>
										<th class="col-md-2">Link</th>
										<th class="col-md-1">Ord</th>
										<th class="col-md-1">Select</th>
									</tr>
									</thead>
									<tbody>
									<tr class="info" ng-repeat="ii in currentRefSection.jumpItems | offset:pgJumpItems.offset() | limitTo:pgJumpItems.itemsPerPage">
										<td>{{ii.title}}</td>
										<td>{{ii.note | truncate:true:60:'...'}}</td>
										<td>{{ii.link | truncate:false:20:'...'}}</td>
										<td>{{ii.order}}</td>
										<td>
											<input type="checkbox"
												   ng-click="tabJumpItemsCtx.selectItem(($index + pgJumpItems.offset()), ii)"
												   ng-checked="(($index + pgJumpItems.offset()) === tabJumpItemsCtx.selectedRow)">
										</td>
									</tr>
									</tbody>
								</table>
								<div class="row">
									<div class="col-md-8 col-md-offset-2 text-center">
										<ul class="pagination" style="margin-top:6px; margin-bottom:6px">
											<li ng-class="pgJumpItems.prevPageDisabled()">
												<a href ng-click="pgJumpItems.prevPage()">«</a>
											</li>
											<li ng-repeat="n in pgJumpItems.range()"
												ng-class="{active: n == pgJumpItems.currentPage}" ng-click="pgJumpItems.setPage(n)">
												<a href="#">{{n+1}}</a>
											</li>
											<li ng-class="pgJumpItems.nextPageDisabled()">
												<a href ng-click="pgJumpItems.nextPage()">»</a>
											</li>
										</ul>
									</div>
								</div>
							</div>
						</div>  <!-- Closing jumpList Tab -->

						<div id="linkList" class="tab-pane fade">
							<div class="row voffset2">
								<div class="form-group col-md-6">
									<input ng-model="tabLinkItemsCtx.selectedItem.title"
										   type="text" class="form-control"
										   placeholder="Enter title for item" style="width:100%">
								</div>

								<div class="form-group col-md-4">
									<input ng-model="tabLinkItemsCtx.selectedItem.link"
										   type="text" class="form-control" placeholder="Enter url" style="width:100%">
								</div>

								<div class="form-group col-md-2">
									<input ng-model="tabLinkItemsCtx.selectedItem.order"
										   type="number" class="form-control" style="width:100%">
								</div>

							</div>

							<div class="row">
								<div class="form-group col-md-12">
									<label for="commentB">Note:</label>
									<textarea ng-model="tabLinkItemsCtx.selectedItem.note"
											  class="form-control" rows="2" id="commentB"></textarea>
								</div>
							</div>

							<div class="row">
								<div class="col-md-3 col-md-offset-9">
									<button type="button" class="btn btn-warning btn-sm"
											ng-click="tabLinkItemsCtx.itemCancel()" >Clear</button>
									<button type="button" class="btn btn-danger btn-sm"
											ng-click="tabLinkItemsCtx.itemDelete()" >Delete</button>
									<button type="button" class="btn btn-primary btn-sm"
											ng-click="tabLinkItemsCtx.itemAddOrSave()" >{{tabLinkItemsCtx.verb}}</button>
								</div>
							</div>

							<div class="row">
								<table class="table table-condensed table-hover voffset3">
									<thead>
										<tr>
											<th class="col-md-3">Title</th>
											<th class="col-md-5">Note</th>
											<th class="col-md-2">Link</th>
											<th class="col-md-1">Ord</th>
											<th class="col-md-1">Select</th>
										</tr>
									</thead>
									<tbody>
										<tr class="info" ng-repeat="ii in tabLinkItemsCtx.itemList | offset:pgLinkItems.offset() | limitTo:pgLinkItems.itemsPerPage">
											<td>{{ii.title}}</td>
											<td>{{ii.note | truncate:true:60:'...'}}</td>
											<td>{{ii.link | truncate:false:20:'...'}}</td>
											<td>{{ii.order}}</td>
											<td>
												<input type="checkbox"
													   ng-checked="(($index + pgLinkItems.offset()) === tabLinkItemsCtx.selectedRow)"
													   ng-click="tabLinkItemsCtx.selectItem($index, pgLinkItems.offset(), ii ) " >
											</td>
										</tr>
									</tbody>
								</table>
								<div class="row">
									<div class="col-md-8 col-md-offset-2 text-center">
										<ul class="pagination" style="margin-top:6px; margin-bottom:6px">
											<li ng-class="pgLinkItems.prevPageDisabled()">
												<a href ng-click="pgLinkItems.prevPage()">«</a>
											</li>
											<li ng-repeat="n in pgLinkItems.range()"
												ng-class="{active: n == pgLinkItems.currentPage}" ng-click="pgLinkItems.setPage(n)">
												<a href="#">{{n+1}}</a>
											</li>
											<li ng-class="pgLinkItems.nextPageDisabled()">
												<a href ng-click="pgLinkItems.nextPage()">»</a>
											</li>
										</ul>
									</div>
								</div>
							</div>
						</div>  <!-- Closing linkList Tab -->
						<div id="milestones" class="tab-pane fade">
							<form>
								<div class="row">
									<div ng-repeat="t in msMgr.milestones" class="col-md-2"><strong>{{t.title}}</strong></div>
								</div>
								<div class="row voffset2">
									<div ng-repeat="d in msMgr.milestones" class="col-md-2"><input type="date" ng-model="d.date" style="width:100%"></div>
								</div>
								<div class="row voffset2">
									<div ng-repeat="e in msMgr.milestones" class="col-md-2"><input type="checkbox" ng-model="e.done" style="width:40%">Done</div>
								</div>
								<div class="row voffset4">
									<div class="col-md-3 col-md-offset-9">
										<button type="button" class="btn btn-warning btn-sm"
												ng-click="msMgr.clear()"
												ng-disabled="msMgr.milestones===undefined">Clear</button>
										<button type="button" class="btn btn-danger btn-sm"
												ng-click="msMgr.delete()"
												ng-disabled="msMgr.milestones===undefined">Delete</button>
										<button type="button" class="btn btn-primary btn-sm"
												ng-click="msMgr.save()"
												ng-disabled="msMgr.milestones===undefined">Save</button>
									</div>
								</div>

								<div class="row voffset2"></div>

							</form>
					    </div>  <!-- Closing milestones Tab -->
					</div>
					</div>
				</div>
			</div>

			<div class="row voffset1">
				<div class="col-md-4 col-md-offset-9">
					<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>

					<button type="button" class="btn btn-warning btn-sm" ng-click="cancel()" >Cancel</button>

					<button type="button" class="btn btn-danger btn-sm"
							ng-click="delete()"
							ng-disabled="currentRefSection._id === undefined">Delete</button>

					<button type="button" class="btn btn-primary btn-sm"
							ng-click="save()"
							ng-disabled="saveReady === false" >Save</button>
				</div>
			</div>
		</div>  <!-- Closing Setup -->


	<div style="width:800px; margin-left:-400px;" ng-switch-when="noteDlg" ng-controller="NoteDialogModalController" class="tw-modal container">

		<div class="row voffset2">
			<div class="col-md-8 col-md-offset-2">
					<p>{{params.note}}</p>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12">
				<p class="pull-right">&nbsp &nbsp</p>
				<button ng-show="params.link" type="button" class="btn btn-primary btn-sm pull-right"
						ng-click="go()">{{title}}</button>
				<p class="pull-right">&nbsp</p>
				<button type="button" class="btn btn-warning btn-sm pull-right"
						ng-click="dismiss()">{{dismissText}}</button>
			</div>
		</div>
	</div> <!-- Closing noteDlg -->

</div>  <!-- Closing twmodal -->

</div> <!-- closing container -->

</body>

</html>
